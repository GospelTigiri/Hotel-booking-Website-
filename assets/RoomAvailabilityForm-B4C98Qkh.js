import{r as l,b as u,j as e}from"./index-BmEL4TLi.js";function k(){const[o,b]=l.useState(""),[n,p]=l.useState(""),[c,x]=l.useState(""),[d,s]=l.useState(null),[h,f]=l.useState(null),[i,r]=l.useState(1),[N,v]=l.useState([]),m=new Date().toISOString().split("T")[0];l.useEffect(()=>{u.get("http://localhost/randolphhotels/fetchrooms.php?t=1").then(t=>{v(t.data)}).catch(t=>console.error("Error fetching rooms:",t))},[]);const j=t=>{if(t.preventDefault(),!o||!n||!c){s("⚠️ Please fill in all fields.");return}if(o<m){s("❌ Check-In date cannot be in the past.");return}if(n<o){s("❌ Check-Out date cannot be earlier than Check-In date.");return}u.post("http://localhost/randolphhotels/roomavailability.php",{checkIn:o,checkOut:n,roomType:c,numRooms:i}).then(a=>{f(a.data.status),a.data.status==="Available"?s("✅ "+a.data.status):a.data.status==="Limited rooms available for this room type."?s("⚠️ "+a.data.status):a.data.status==="Not Available. Please try another room type."?s("❌ "+a.data.status):s("❌ "+a.data.message),setTimeout(()=>{s("")},4e3)}).catch(a=>{console.error(a),s("❌ Error checking availability")})},y=()=>{window.location.href=`/payment?roomType=${c}&checkIn=${o}&checkOut=${n}&numRooms=${i}`};return e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"row mb-2 mt-2",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-calendar me-2 text-warning"}),"Check-In Date"]}),e.jsx("input",{type:"date",className:"form-control p-3",value:o,min:m,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-calendar2-check me-2 text-warning"}),"Check-Out Date"]}),e.jsx("input",{type:"date",className:"form-control p-3",value:n,min:o||m,onChange:t=>p(t.target.value)})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-people-fill me-2 text-warning"}),"No. of Rooms"]}),e.jsx("input",{type:"number",className:"form-control p-3",value:i,onChange:t=>{const a=t.target.value;/^\d*$/.test(a)&&(a===""||Number(a)>=1&&Number(a)<=52)&&r(a)},onBlur:()=>{i===""||i===null||Number(i)<1?r(1):Number(i)>52&&r(52)},placeholder:"No. of Rooms"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-door-closed-fill me-2 text-warning"}),"Room Type"]}),e.jsxs("select",{className:"form-select p-3",value:c,onChange:t=>x(t.target.value),children:[e.jsx("option",{value:"",children:"Room Type"}),N.map(t=>e.jsx("option",{value:t.rtype,children:t.rtype},t.id))]})]})]}),e.jsxs("div",{className:"row mt-2",children:[e.jsx("div",{className:"col-md-6 mb-2",children:e.jsx("button",{type:"submit",className:"btn btn-appointment text-white px-4 py-2 w-100",children:"ROOM CHECK"})}),e.jsx("div",{className:"col-md-6 mb-2",children:e.jsx("button",{type:"button",className:"btn btn-primary text-white px-4 py-2 w-100",onClick:y,disabled:!(h==="Available"||h==="Limited rooms available for this room type."),children:"BOOK NOW"})})]}),d&&e.jsx("div",{className:"alert mt-3 p-3 text-center",style:{backgroundColor:"#f8f9fa",borderRadius:"5px",fontWeight:"bold"},children:d})]})}export{k as R};
